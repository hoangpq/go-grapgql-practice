{"dependencies":[{"name":"react","loc":{"line":10,"column":21}},{"name":"prop-types","loc":{"line":14,"column":25}},{"name":"graphql","loc":{"line":18,"column":23}},{"name":"marked","loc":{"line":20,"column":22}},{"name":"../utility/normalizeWhitespace","loc":{"line":24,"column":35}},{"name":"../utility/onHasCompletion","loc":{"line":26,"column":31}},{"name":"codemirror","loc":{"line":209,"column":31}},{"name":"codemirror/addon/hint/show-hint","loc":{"line":102,"column":14}},{"name":"codemirror/addon/comment/comment","loc":{"line":103,"column":14}},{"name":"codemirror/addon/edit/matchbrackets","loc":{"line":104,"column":14}},{"name":"codemirror/addon/edit/closebrackets","loc":{"line":105,"column":14}},{"name":"codemirror/addon/fold/foldgutter","loc":{"line":106,"column":14}},{"name":"codemirror/addon/fold/brace-fold","loc":{"line":107,"column":14}},{"name":"codemirror/addon/search/search","loc":{"line":108,"column":14}},{"name":"codemirror/addon/search/searchcursor","loc":{"line":109,"column":14}},{"name":"codemirror/addon/search/jump-to-line","loc":{"line":110,"column":14}},{"name":"codemirror/addon/dialog/dialog","loc":{"line":111,"column":14}},{"name":"codemirror/addon/lint/lint","loc":{"line":112,"column":14}},{"name":"codemirror/keymap/sublime","loc":{"line":113,"column":14}},{"name":"codemirror-graphql/hint","loc":{"line":114,"column":14}},{"name":"codemirror-graphql/lint","loc":{"line":115,"column":14}},{"name":"codemirror-graphql/info","loc":{"line":116,"column":14}},{"name":"codemirror-graphql/jump","loc":{"line":117,"column":14}},{"name":"codemirror-graphql/mode","loc":{"line":118,"column":14}}],"generated":{"js":"\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}function r(e,r){if(!(e instanceof r))throw new TypeError(\"Cannot call a class as a function\")}function t(e,r){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!r||\"object\"!=typeof r&&\"function\"!=typeof r?e:r}function o(e,r){if(\"function\"!=typeof r&&null!==r)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.QueryEditor=void 0;var i=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),n=require(\"react\"),u=e(n),s=require(\"prop-types\"),a=e(s),c=require(\"graphql\"),d=require(\"marked\"),l=e(d),p=require(\"../utility/normalizeWhitespace\"),h=require(\"../utility/onHasCompletion\"),f=e(h),m=/^[a-zA-Z0-9_@(]$/,g=exports.QueryEditor=function(e){function n(e){r(this,n);var o=t(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return o._onKeyUp=function(e,r){m.test(r.key)&&o.editor.execCommand(\"autocomplete\")},o._onEdit=function(){o.ignoreChangeEvent||(o.cachedValue=o.editor.getValue(),o.props.onEdit&&o.props.onEdit(o.cachedValue))},o._onHasCompletion=function(e,r){(0,f.default)(e,r,o.props.onHintInformationRender)},o.cachedValue=e.value||\"\",o}return o(n,u.default.Component),i(n,[{key:\"componentDidMount\",value:function(){var e=this,r=require(\"codemirror\");require(\"codemirror/addon/hint/show-hint\"),require(\"codemirror/addon/comment/comment\"),require(\"codemirror/addon/edit/matchbrackets\"),require(\"codemirror/addon/edit/closebrackets\"),require(\"codemirror/addon/fold/foldgutter\"),require(\"codemirror/addon/fold/brace-fold\"),require(\"codemirror/addon/search/search\"),require(\"codemirror/addon/search/searchcursor\"),require(\"codemirror/addon/search/jump-to-line\"),require(\"codemirror/addon/dialog/dialog\"),require(\"codemirror/addon/lint/lint\"),require(\"codemirror/keymap/sublime\"),require(\"codemirror-graphql/hint\"),require(\"codemirror-graphql/lint\"),require(\"codemirror-graphql/info\"),require(\"codemirror-graphql/jump\"),require(\"codemirror-graphql/mode\"),this.editor=r(this._node,{value:this.props.value||\"\",lineNumbers:!0,tabSize:2,mode:\"graphql\",theme:this.props.editorTheme||\"graphiql\",keyMap:\"sublime\",autoCloseBrackets:!0,matchBrackets:!0,showCursorWhenSelecting:!0,readOnly:!!this.props.readOnly&&\"nocursor\",foldGutter:{minFoldSize:4},lint:{schema:this.props.schema},hintOptions:{schema:this.props.schema,closeOnUnfocus:!1,completeSingle:!1},info:{schema:this.props.schema,renderDescription:function(e){return(0,l.default)(e,{sanitize:!0})},onClick:function(r){return e.props.onClickReference(r)}},jump:{schema:this.props.schema,onClick:function(r){return e.props.onClickReference(r)}},gutters:[\"CodeMirror-linenumbers\",\"CodeMirror-foldgutter\"],extraKeys:{\"Cmd-Space\":function(){return e.editor.showHint({completeSingle:!0})},\"Ctrl-Space\":function(){return e.editor.showHint({completeSingle:!0})},\"Alt-Space\":function(){return e.editor.showHint({completeSingle:!0})},\"Shift-Space\":function(){return e.editor.showHint({completeSingle:!0})},\"Cmd-Enter\":function(){e.props.onRunQuery&&e.props.onRunQuery()},\"Ctrl-Enter\":function(){e.props.onRunQuery&&e.props.onRunQuery()},\"Shift-Ctrl-P\":function(){e.props.onPrettifyQuery&&e.props.onPrettifyQuery()},\"Cmd-F\":\"findPersistent\",\"Ctrl-F\":\"findPersistent\",\"Ctrl-Left\":\"goSubwordLeft\",\"Ctrl-Right\":\"goSubwordRight\",\"Alt-Left\":\"goGroupLeft\",\"Alt-Right\":\"goGroupRight\"}}),this.editor.on(\"change\",this._onEdit),this.editor.on(\"keyup\",this._onKeyUp),this.editor.on(\"hasCompletion\",this._onHasCompletion),this.editor.on(\"beforeChange\",this._onBeforeChange)}},{key:\"componentDidUpdate\",value:function(e){var r=require(\"codemirror\");this.ignoreChangeEvent=!0,this.props.schema!==e.schema&&(this.editor.options.lint.schema=this.props.schema,this.editor.options.hintOptions.schema=this.props.schema,this.editor.options.info.schema=this.props.schema,this.editor.options.jump.schema=this.props.schema,r.signal(this.editor,\"change\",this.editor)),this.props.value!==e.value&&this.props.value!==this.cachedValue&&(this.cachedValue=this.props.value,this.editor.setValue(this.props.value)),this.ignoreChangeEvent=!1}},{key:\"componentWillUnmount\",value:function(){this.editor.off(\"change\",this._onEdit),this.editor.off(\"keyup\",this._onKeyUp),this.editor.off(\"hasCompletion\",this._onHasCompletion),this.editor=null}},{key:\"render\",value:function(){var e=this;return u.default.createElement(\"div\",{className:\"query-editor\",ref:function(r){e._node=r}})}},{key:\"getCodeMirror\",value:function(){return this.editor}},{key:\"getClientHeight\",value:function(){return this._node&&this._node.clientHeight}},{key:\"_onBeforeChange\",value:function(e,r){if(\"paste\"===r.origin){var t=r.text.map(p.normalizeWhitespace);r.update(r.from,r.to,t)}}}]),n}();g.propTypes={schema:a.default.instanceOf(c.GraphQLSchema),value:a.default.string,onEdit:a.default.func,readOnly:a.default.bool,onHintInformationRender:a.default.func,onClickReference:a.default.func,onPrettifyQuery:a.default.func,onRunQuery:a.default.func,editorTheme:a.default.string};"},"hash":"328cf6f87c03c972ec48aeb9fe28e085"}