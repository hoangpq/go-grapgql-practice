{"dependencies":[{"name":"graphql/language/kinds","loc":{"line":8,"column":21}},{"name":"graphql","loc":{"line":10,"column":23}},{"name":"./getAutocompleteSuggestions","loc":{"line":12,"column":43}},{"name":"./getDiagnostics","loc":{"line":14,"column":30}},{"name":"./getDefinition","loc":{"line":16,"column":29}},{"name":"graphql-language-service-utils","loc":{"line":18,"column":43}}],"generated":{"js":"\"use strict\";function e(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.GraphQLLanguageService=void 0;var t=require(\"graphql/language/kinds\"),r=require(\"graphql\"),n=require(\"./getAutocompleteSuggestions\"),a=require(\"./getDiagnostics\"),i=require(\"./getDefinition\"),s=require(\"graphql-language-service-utils\"),u=exports.GraphQLLanguageService=function(){function u(t){e(this,u),this._graphQLCache=t,this._graphQLConfig=t.getGraphQLConfig()}return u.prototype.getDiagnostics=function(e,n,i){var s,u,o,c,g,p,h,f,I,l,N,E,_,F;return regeneratorRuntime.async(function(m){for(;;)switch(m.prev=m.next){case 0:s=!1,u=this._graphQLConfig.getConfigForFile(n),o=u.schemaPath,m.prev=3,c=(0,r.parse)(e),o&&n===o||(s=c.definitions.some(function(e){switch(e.kind){case t.OBJECT_TYPE_DEFINITION:case t.INTERFACE_TYPE_DEFINITION:case t.ENUM_TYPE_DEFINITION:case t.UNION_TYPE_DEFINITION:case t.SCALAR_TYPE_DEFINITION:case t.INPUT_OBJECT_TYPE_DEFINITION:case t.TYPE_EXTENSION_DEFINITION:case t.DIRECTIVE_DEFINITION:return!0}return!1})),m.next=12;break;case 8:return m.prev=8,m.t0=m.catch(3),g=(0,a.getRange)(m.t0.locations[0],e),m.abrupt(\"return\",[{severity:a.SEVERITY.ERROR,message:m.t0.message,source:\"GraphQL: Syntax\",range:g}]);case 12:if(o){m.next=14;break}return m.abrupt(\"return\",[]);case 14:return p=e,m.next=17,regeneratorRuntime.awrap(this._graphQLCache.getFragmentDefinitions(u));case 17:return h=m.sent,m.next=20,regeneratorRuntime.awrap(this._graphQLCache.getFragmentDependencies(e,h));case 20:f=m.sent,I=f.reduce(function(e,t){return e+\" \"+(0,r.print)(t.definition)},\"\"),p=p+\" \"+I,l=null,m.prev=24,l=(0,r.parse)(p),m.next=31;break;case 28:return m.prev=28,m.t1=m.catch(24),m.abrupt(\"return\",[]);case 31:return m.next=33,regeneratorRuntime.awrap(this._graphQLCache.getSchema(u.projectName,s));case 33:return N=m.sent,E=void 0,(_=u.extensions.customValidationRules)&&(F=require.resolve(\"\"+_))&&(E=require(\"\"+F)(this._graphQLConfig)),m.abrupt(\"return\",(0,a.validateQuery)(l,N,E,i));case 38:case\"end\":return m.stop()}},null,this,[[3,8],[24,28]])},u.prototype.getAutocompleteSuggestions=function(e,t,r){var a,i;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(a=this._graphQLConfig.getConfigForFile(r)).schemaPath){s.next=7;break}return s.next=4,regeneratorRuntime.awrap(this._graphQLCache.getSchema(a.projectName));case 4:if(!(i=s.sent)){s.next=7;break}return s.abrupt(\"return\",(0,n.getAutocompleteSuggestions)(i,e,t));case 7:return s.abrupt(\"return\",[]);case 8:case\"end\":return s.stop()}},null,this)},u.prototype.getDefinition=function(e,n,a){var u,o,c;return regeneratorRuntime.async(function(g){for(;;)switch(g.prev=g.next){case 0:u=this._graphQLConfig.getConfigForFile(a),o=void 0,g.prev=2,o=(0,r.parse)(e),g.next=9;break;case 6:return g.prev=6,g.t0=g.catch(2),g.abrupt(\"return\",null);case 9:if(!(c=(0,s.getASTNodeAtPosition)(e,o,n))){g.next=16;break}g.t1=c.kind,g.next=g.t1===t.FRAGMENT_SPREAD?14:g.t1===t.FRAGMENT_DEFINITION?15:g.t1===t.OPERATION_DEFINITION?15:16;break;case 14:return g.abrupt(\"return\",this._getDefinitionForFragmentSpread(e,o,c,a,u));case 15:return g.abrupt(\"return\",(0,i.getDefinitionQueryResultForDefinitionNode)(a,e,c));case 16:return g.abrupt(\"return\",null);case 17:case\"end\":return g.stop()}},null,this,[[2,6]])},u.prototype._getDefinitionForFragmentSpread=function(e,r,n,a,s){var u,o,c,g,p,h;return regeneratorRuntime.async(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,regeneratorRuntime.awrap(this._graphQLCache.getFragmentDefinitions(s));case 2:return u=f.sent,f.next=5,regeneratorRuntime.awrap(this._graphQLCache.getFragmentDependenciesForAST(r,u));case 5:return o=f.sent,c=r.definitions.filter(function(e){return e.kind===t.FRAGMENT_DEFINITION}),g=c,p=g.map(function(t){return{filePath:a,content:e,definition:t}}),f.next=11,regeneratorRuntime.awrap((0,i.getDefinitionQueryResultForFragmentSpread)(e,n,o.concat(p)));case 11:return h=f.sent,f.abrupt(\"return\",h);case 13:case\"end\":return f.stop()}},null,this)},u}();"},"hash":"35aa9ee289dd307f55566a664c6eba7d"}