{"dependencies":[{"name":"graphql","loc":{"line":12,"column":23}},{"name":"react","loc":{"line":14,"column":21}},{"name":"prop-types","loc":{"line":18,"column":25}},{"name":"../utility/QueryStore","loc":{"line":22,"column":26}},{"name":"./HistoryQuery","loc":{"line":26,"column":28}}],"generated":{"js":"\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function r(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function o(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.QueryHistory=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=require(\"graphql\"),s=require(\"react\"),u=e(s),l=require(\"prop-types\"),f=e(l),c=require(\"../utility/QueryStore\"),y=e(c),p=require(\"./HistoryQuery\"),h=e(p),v=function(e,t,r){if(e.queryID===t.queryID)return!1;try{(0,n.parse)(e.query)}catch(e){return!1}if(!r)return!0;if(JSON.stringify(e.query)===JSON.stringify(r.query)){if(JSON.stringify(e.variables)===JSON.stringify(r.variables))return!1;if(!e.variables&&!r.variables)return!1}return!0},d=20,b=exports.QueryHistory=function(e){function n(e){t(this,n);var o=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));m.call(o),o.historyStore=new y.default(\"queries\",e.storage),o.favoriteStore=new y.default(\"favorites\",e.storage);var i=o.historyStore.fetchAll(),a=o.favoriteStore.fetchAll(),s=i.concat(a);return o.state={queries:s},o}return o(n,u.default.Component),a(n,[{key:\"componentWillReceiveProps\",value:function(e){if(v(e,this.props,this.historyStore.fetchRecent())){var t={query:e.query,variables:e.variables,operationName:e.operationName};this.historyStore.push(t),this.historyStore.length>d&&this.historyStore.shift();var r=this.historyStore.items,o=this.favoriteStore.items,i=r.concat(o);this.setState({queries:i})}}},{key:\"render\",value:function(){var e=this,t=this.state.queries.slice().reverse().map(function(t,r){return u.default.createElement(h.default,i({handleToggleFavorite:e.toggleFavorite,key:r,onSelect:e.props.onSelectQuery},t))});return u.default.createElement(\"div\",null,u.default.createElement(\"div\",{className:\"history-title-bar\"},u.default.createElement(\"div\",{className:\"history-title\"},\"History\"),u.default.createElement(\"div\",{className:\"doc-explorer-rhs\"},this.props.children)),u.default.createElement(\"div\",{className:\"history-contents\"},t))}}]),n}();b.propTypes={query:f.default.string,variables:f.default.string,operationName:f.default.string,queryID:f.default.number,onSelectQuery:f.default.func,storage:f.default.object};var m=function(){var e=this;this.toggleFavorite=function(t,r,o,i){var a={query:t,variables:r,operationName:o};e.favoriteStore.contains(a)?i&&(a.favorite=!1,e.favoriteStore.delete(a)):(a.favorite=!0,e.favoriteStore.push(a));var n=e.historyStore.items,s=e.favoriteStore.items,u=n.concat(s);e.setState({queries:u})}};"},"hash":"8058cb5836484d56c45ae968cba498db"}