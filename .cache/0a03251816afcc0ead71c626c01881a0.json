{"dependencies":[{"name":"react","loc":{"line":9,"column":21}},{"name":"prop-types","loc":{"line":13,"column":25}},{"name":"./Argument","loc":{"line":17,"column":24}},{"name":"./TypeLink","loc":{"line":21,"column":24}}],"generated":{"js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _Argument = require('./Argument');\n\nvar _Argument2 = _interopRequireDefault(_Argument);\n\nvar _TypeLink = require('./TypeLink');\n\nvar _TypeLink2 = _interopRequireDefault(_TypeLink);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  Copyright (c) Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  This source code is licensed under the license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  LICENSE file in the root directory of this source tree.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar SearchResults = function (_React$Component) {\n  _inherits(SearchResults, _React$Component);\n\n  function SearchResults() {\n    _classCallCheck(this, SearchResults);\n\n    return _possibleConstructorReturn(this, (SearchResults.__proto__ || Object.getPrototypeOf(SearchResults)).apply(this, arguments));\n  }\n\n  _createClass(SearchResults, [{\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate(nextProps) {\n      return this.props.schema !== nextProps.schema || this.props.searchValue !== nextProps.searchValue;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var searchValue = this.props.searchValue;\n      var withinType = this.props.withinType;\n      var schema = this.props.schema;\n      var onClickType = this.props.onClickType;\n      var onClickField = this.props.onClickField;\n\n      var matchedWithin = [];\n      var matchedTypes = [];\n      var matchedFields = [];\n\n      var typeMap = schema.getTypeMap();\n      var typeNames = Object.keys(typeMap);\n\n      // Move the within type name to be the first searched.\n      if (withinType) {\n        typeNames = typeNames.filter(function (n) {\n          return n !== withinType.name;\n        });\n        typeNames.unshift(withinType.name);\n      }\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        var _loop = function _loop() {\n          var typeName = _step.value;\n\n          if (matchedWithin.length + matchedTypes.length + matchedFields.length >= 100) {\n            return 'break';\n          }\n\n          var type = typeMap[typeName];\n          if (withinType !== type && isMatch(typeName, searchValue)) {\n            matchedTypes.push(_react2.default.createElement(\n              'div',\n              { className: 'doc-category-item', key: typeName },\n              _react2.default.createElement(_TypeLink2.default, { type: type, onClick: onClickType })\n            ));\n          }\n\n          if (type.getFields) {\n            var fields = type.getFields();\n            Object.keys(fields).forEach(function (fieldName) {\n              var field = fields[fieldName];\n              var matchingArgs = void 0;\n\n              if (!isMatch(fieldName, searchValue)) {\n                if (field.args && field.args.length) {\n                  matchingArgs = field.args.filter(function (arg) {\n                    return isMatch(arg.name, searchValue);\n                  });\n                  if (matchingArgs.length === 0) {\n                    return;\n                  }\n                } else {\n                  return;\n                }\n              }\n\n              var match = _react2.default.createElement(\n                'div',\n                { className: 'doc-category-item', key: typeName + '.' + fieldName },\n                withinType !== type && [_react2.default.createElement(_TypeLink2.default, { key: 'type', type: type, onClick: onClickType }), '.'],\n                _react2.default.createElement(\n                  'a',\n                  {\n                    className: 'field-name',\n                    onClick: function onClick(event) {\n                      return onClickField(field, type, event);\n                    } },\n                  field.name\n                ),\n                matchingArgs && ['(', _react2.default.createElement(\n                  'span',\n                  { key: 'args' },\n                  matchingArgs.map(function (arg) {\n                    return _react2.default.createElement(_Argument2.default, {\n                      key: arg.name,\n                      arg: arg,\n                      onClickType: onClickType,\n                      showDefaultValue: false\n                    });\n                  })\n                ), ')']\n              );\n\n              if (withinType === type) {\n                matchedWithin.push(match);\n              } else {\n                matchedFields.push(match);\n              }\n            });\n          }\n        };\n\n        for (var _iterator = typeNames[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _ret = _loop();\n\n          if (_ret === 'break') break;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      if (matchedWithin.length + matchedTypes.length + matchedFields.length === 0) {\n        return _react2.default.createElement(\n          'span',\n          { className: 'doc-alert-text' },\n          'No results found.'\n        );\n      }\n\n      if (withinType && matchedTypes.length + matchedFields.length > 0) {\n        return _react2.default.createElement(\n          'div',\n          null,\n          matchedWithin,\n          _react2.default.createElement(\n            'div',\n            { className: 'doc-category' },\n            _react2.default.createElement(\n              'div',\n              { className: 'doc-category-title' },\n              'other results'\n            ),\n            matchedTypes,\n            matchedFields\n          )\n        );\n      }\n\n      return _react2.default.createElement(\n        'div',\n        null,\n        matchedWithin,\n        matchedTypes,\n        matchedFields\n      );\n    }\n  }]);\n\n  return SearchResults;\n}(_react2.default.Component);\n\nSearchResults.propTypes = {\n  schema: _propTypes2.default.object,\n  withinType: _propTypes2.default.object,\n  searchValue: _propTypes2.default.string,\n  onClickType: _propTypes2.default.func,\n  onClickField: _propTypes2.default.func\n};\nexports.default = SearchResults;\n\n\nfunction isMatch(sourceText, searchValue) {\n  try {\n    var escaped = searchValue.replace(/[^_0-9A-Za-z]/g, function (ch) {\n      return '\\\\' + ch;\n    });\n    return sourceText.search(new RegExp(escaped, 'i')) !== -1;\n  } catch (e) {\n    return sourceText.toLowerCase().indexOf(searchValue.toLowerCase()) !== -1;\n  }\n}"},"hash":"bde7f7d812a685034c383cc886537356"}